$.getJSON("https://raw.githubusercontent.com/danny2590/CapOne17/master/data/zipcodes.json",function(data){const myChart=document.getElementById("myChart").getContext("2d");const neighborhoods=data.map(function(location){return location.neighborhoods});const nightlyCost=data.map(function(location){return location.avgPrice});const bookingFrequency=data.map(function(location){return location.listings});const chartOptions={type:'bar',data:{labels:neighborhoods,datasets:[{label:'Price Per Night',data:nightlyCost,backgroundColor:randomColor(),},{type:'line',label:"Booking Frequency",data:bookingFrequency,fill:!1,}]},options:{legend:{display:!0},title:{display:!0,text:'Average Price Per Night'}}};return new Chart(myChart,chartOptions)});$.getJSON("https://raw.githubusercontent.com/danny2590/CapOne17/master/data/zipcodes.json",function(data){const pieChart=document.getElementById("pieChart").getContext('2d');const neighborhoods=data.map(function(location){return location.neighborhoods});const nightlyCost=data.map(function(location){return location.avgPrice});const bookingFrequency=data.map(function(location){return location.listings});const pieChartOptions={type:'pie',data:{labels:neighborhoods.slice(0,10),backgroundColorHover:randomColor(),datasets:[{label:"No. of Listings",data:bookingFrequency.slice(0,10),backgroundColor:randomColor({count:10,hue:'random',luminosity:'light',}),}]},options:{legend:{display:!0},title:{display:!0,text:'Most Frequently Booked Neighborhoods'}}};return new Chart(pieChart,pieChartOptions)});$.getJSON("https://raw.githubusercontent.com/danny2590/CapOne17/master/data/listings.json",function(data){const reviewChart=document.getElementById("reviewChart").getContext("2d");const bedrooms=data.map(function(location){return location.bedrooms});const reviewScore=data.map(function(location){return location.avg_review_score});const avgEarnings=data.map(function(location){return location.avg_price});const reviewNums=data.map(function(location){return location.num_reviews});const plotOptions={type:'bar',data:{labels:["Studio","One Bedroom","Two Bedroom","Three Bedroom","Four Bedroom","Five Bedroom","Six Bedroom","Seven Bedroom"],datasets:[{label:"Per Night Price",type:"line",backgroundColor:"rgba(95, 125, 151, 0.9)",data:avgEarnings,fill:!1},{label:"Average No of Reviews",type:"bar",backgroundColor:"rgba(164, 189, 134, 0.9)",backgroundColorHover:"#3e95cd",data:reviewNums,fill:!1},{label:"Review Score",type:"bar",backgroundColor:"red",data:reviewScore,}]},options:{legend:{display:!0},title:{display:!0,text:'Home Size Vs. Popularity'},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Avg Price Per Room"}}],xAxes:[{scaleLabel:{display:!0,labelString:"No. of Bedrooms"}}]}}};return new Chart(reviewChart,plotOptions)});$(document).ready(function(){$(".mouse").click(function(event){$('html, body').animate({scrollTop:'+=575px'},1200)})});$("#zipBtn").click(function(){var lat=document.getElementById("lat").value;var long=document.getElementById("long").value;filterJSON(lat,long)});function filterJSON(lat,long){var check=$.getJSON("https://raw.githubusercontent.com/danny2590/CapOne17/master/data/locate.json",function(data){var hoodName=document.getElementById("newZip");var hoodPrice=document.getElementById("newNightly");var hoodWeeklyPrice=document.getElementById("newPrice");var hostPricing;var weeklyPrice;const hostData=data.filter(function(el){return(el.latitude==lat)&&(el.longitude==long)}).map(function(el){hostPricing=el.price;return el.neighbourhood_cleansed})
weeklyPrice=hostPricing*7;hoodName.innerHTML=hostData;hoodPrice.innerHTML=("$"+hostPricing);hoodWeeklyPrice.innerHTML=("$"+weeklyPrice)})}
